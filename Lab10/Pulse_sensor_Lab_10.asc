Version 4
SHEET 1 2508 2428
WIRE 0 -32 -48 -32
WIRE 112 -32 64 -32
WIRE 448 -32 400 -32
WIRE 576 -32 512 -32
WIRE -48 64 -48 -32
WIRE 0 64 -48 64
WIRE 112 64 112 -32
WIRE 112 64 80 64
WIRE 400 64 400 -32
WIRE 448 64 400 64
WIRE 576 64 576 -32
WIRE 576 64 528 64
WIRE 960 80 928 80
WIRE 960 96 960 80
WIRE -48 160 -48 64
WIRE -48 160 -208 160
WIRE 0 160 -48 160
WIRE 400 160 400 64
WIRE 464 160 400 160
WIRE 928 160 928 80
WIRE 112 176 112 64
WIRE 112 176 64 176
WIRE 176 176 112 176
WIRE 192 176 176 176
WIRE 288 176 272 176
WIRE 400 176 400 160
WIRE 400 176 352 176
WIRE 576 176 576 64
WIRE 576 176 528 176
WIRE 624 176 576 176
WIRE 656 176 624 176
WIRE 736 176 736 144
WIRE 736 176 720 176
WIRE 896 176 736 176
WIRE 0 192 -48 192
WIRE 464 192 448 192
WIRE 736 192 736 176
WIRE 1056 192 960 192
WIRE 896 208 864 208
WIRE -208 224 -208 160
WIRE -48 224 -48 192
WIRE 496 224 496 208
WIRE 32 240 32 208
WIRE 256 288 256 272
WIRE 736 288 736 272
WIRE 864 304 864 208
WIRE 896 304 864 304
WIRE 1056 304 1056 192
WIRE 1056 304 976 304
WIRE 448 320 448 192
WIRE 448 320 288 320
WIRE -208 336 -208 304
WIRE 864 336 864 304
WIRE 288 384 288 320
WIRE 304 384 288 384
WIRE 448 400 448 320
WIRE 448 400 368 400
WIRE 256 416 256 368
WIRE 304 416 256 416
WIRE 256 448 256 416
WIRE 336 448 336 432
WIRE 864 448 864 416
WIRE 64 560 64 512
WIRE 256 560 256 528
FLAG 864 512 0
FLAG 736 288 0
FLAG 256 560 0
FLAG -48 224 0
FLAG 32 240 0
FLAG 496 224 0
FLAG 336 448 0
FLAG 960 96 0
FLAG 64 560 0
FLAG 736 64 HV
FLAG 64 432 HV
FLAG 32 144 HV
FLAG 496 144 HV
FLAG 928 224 HV
FLAG 336 368 HV
FLAG -208 336 0
FLAG 1056 192 G
FLAG 256 272 HV
FLAG 176 176 E
FLAG 624 176 F
SYMBOL OpAmps\\opamp2 32 112 R0
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 496 112 R0
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 336 336 R0
SYMATTR InstName U4
SYMATTR Value LM358
SYMBOL OpAmps\\opamp2 928 256 M180
SYMATTR InstName U6
SYMATTR Value LM358
SYMBOL res 96 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL res 544 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10Meg
SYMBOL res 992 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 330k
SYMBOL res 880 432 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 330k
SYMBOL res 272 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 272 544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 176 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R7
SYMATTR Value 560k
SYMBOL res 720 48 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL res 720 176 R0
SYMATTR InstName R9
SYMATTR Value 1Meg
SYMBOL cap 64 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 10n
SYMBOL cap 352 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 560n
SYMBOL cap 512 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 4n
SYMBOL cap 656 192 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value 560n
SYMBOL cap 848 448 R0
SYMATTR InstName C5
SYMATTR Value 1µ
SYMBOL voltage 64 416 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL current -208 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 18 88 Left 2
SYMATTR Value SINE(2u 10n 2)
SYMATTR InstName I1
TEXT 1312 32 Left 1 !* BEGIN SPICE MODEL LM358\n* ON SEMICONDUCTOR NEXT GEN MODEL 9/27/2018\n* MODEL FEATURES INCLUDE OUTPUT SWING, OUTPUT CURRENT\n* THROUGH THE SUPPLY RAILS, CLASS B OUTPUT STAGE, OUTPUT\n* SWING, OPEN LOOP GAIN AND PHASE WITH RL AND CL EFFECTS,\n* POWER SUPPLY REJECTION WITH FREQUENCY EFFECTS, COMMON\n* MODE REJECTION WITH FREQUENCY EFFECTS, INPUT VOLTAGE\n* NOISE WITH 1/F, INPUT CURRENT NOISE, INPUT BIAS AND\n* OFFSET CURRENT, INPUT COMMON MODE VOLTAGE RANGE, VOS\n* WITH TEMPERATURE EFFECTS, AND QUIESCENT CURRENT WITH\n* TEMPERATURE EFFECTS.\n* MODEL TOTAL SUPPLY VOLTAGE RANGE IS 3 TO 36 V.\n* MODEL TEMP RANGE IS -55 TO +125 DEG C.\n* NOTE THAT MODEL IS FUNCTIONAL OVER THIS TEMP RANGE\n* BUT NOT ALL PARAMETERS TRACK THOSE OF THE REAL PART.\n* NOTE THAT LIKE THE REAL PART THERE IS NO AB BIAS\n* IN THE OUTPUT STAGE WHICH UNDER SOME CIRCUMSTANCES\n* CAUSES HIGH OUTPUT IMPEDANCE AND OR CROSSOVER DELAY\n* WHICH CAN EFFECT THE PERFORMANCE IN SOME CIRCUITS.\n* THE COMBINATION OF OUTPUT CURRENT SINK AND NO AB\n* BIAS WHEN USED WITH A LARGE CLOAD CAN CAUSE SOME\n* INTERESTING SMALL SIGNAL STEP OVERSHOOTS THAT ARE\n* LARGER THAN NORMAL AND RAMP LINEARLY RATHER THAN\n* BEING SHAPED LIKE A CLASSIC OVERSHOOT. THIS HAPPENS\n* IDENTICALLY WITH THE REAL PART AND THE MODEL.\n*\n* PINOUT ORDER +IN -IN +V -V OUT\n* PINOUT ORDER  1   2   3  4  5\n.SUBCKT LM358 1 2 3 4 5\nR44 4 6 4E4\nI1 4 7 0.5E-6\nQ1 4 8 9 QPI\nQ2 4 2 10 QPA\nQ3 9 9 11 QPI\nQ4 10 10 11 QPI\nQ5 12 13 4 QNQ\nQ6 13 13 4 QNQ\nQ7 4 12 14 QPQ\nQ8 3 14 6 QNQ\nQ9 15 6 4 QNQ\nQ10 3 15 16 QNQ\nQ11 3 16 17 QNQ\nR67 17 16 4E4\nR68 5 17 18\nQ12 4 15 5 QPQ\nQ13 15 17 5 QNQ\nI2 18 3 120E-9\nI3 19 3 60E-9\nI4 20 3 1E-6\nQ14 11 18 3 QPQ\nQ15 14 19 3 QPQ\nQ16 5 7 4 QNQ\nQ17 15 20 3 QPQ\nC15 21 22 4.8E-12\nR69 12 21 3\nR70 12 15 3E9\nE2 23 8 3 0 -10E-6\nV51 23 1 1.56E-3\nI6 3 4 5E-6\nR71 4 3 4.5E5\nQ18 12 9 11 QPQ\nQ19 13 10 11 QPQ\nC17 12 13 8E-12\nC18 6 15 1E-12\nC21 3 24 100E-15\nR78 11 24 3E5\nC22 1 2 0.23E-12\nC23 2 0 0.79E-12\nC24 1 0 0.79E-12\nE3 22 0 15 0 2\nC25 5 0 50E-15\nQ20 25 25 0 QNQ\nG1 3 4 VT 0 3E-4\nI7 0 25 1E-3\nV53 25 26 0.25\nR79 0 26 1E6\nE4 VT 0 27 26 1\nR80 0 VT 1E6\nV54 27 0 0.55\nR81 0 27 1E6\n.MODEL QPQ PNP IKF=3E-3 RC=300 KF=4.8E-17 BR=1\n.MODEL QPA PNP IKF=3E-3 RC=380 IS=1.01E-16 VAF=245 RE=5 RB=1700 BF=300 KF=4.8E-17 BR=1\n.MODEL QPI PNP IKF=3E-3 RC=380 IS=1.01E-16 VAF=290 RE=5 RB=1700 BF=306 KF=4.8E-17 BR=1\n.MODEL QNQ NPN IKF=5E-3 RC=25  KF=4.8E-17 BR=1\n.ENDS\n* END SPICE MODEL LM358
TEXT 696 -128 Left 2 !.tran 5
TEXT -128 456 Left 2 ;5V from \nArduino Uno
TEXT -384 -200 Left 2 ;The components in this schematic match the parts provided in your lab kit.
TEXT -712 184 Left 2 ;The photocurrent is modeled\nas a current source with:\n \n   1. a DC offset (representing the \n       average photocurrent)\n   2. an oscillating part representing \n       the variation due to the pulse.
TEXT 696 -200 Left 2 ;Run the simulation for 5 seconds\n(enough for 10 pulses at 120 beats per min)
